<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
<script>
        //생성자 함수 : new 키워드로 객체를 생성해주는 함수
        //생성자 함수의 이름(식별자)는 대문자로 시작
        function Student(name,kor,eng,math){
            //속성
            this.name=name;
            this.kor=kor;
            this.eng=eng;
            this.math=math;

            //총점을 구하는 메서드
            // this.getSum=function(){
            //     return this.kor+this.eng+this.math;
            // }

            // //평균점수를 구하는 메서드
            // this.getAvg= function(){
            //     return this.getSum()/3;
            // }

            // //html을 만들어주는 메서드
            // this.makeHtml = function(){
            //     html = '';
            //     html +='    <tr>';
            //     html +='        <td>'+this.name+'</td>';
            //     html +='        <td>'+this.getSum+'</td>';
            //     html +='        <td>'+this.getAvg+'</td>';
            //     html +='    </tr>';
            //     return html;
            // }
        }
        
        
        
        // var st= new Student('한국', 100, 50, 80);
        // console.log(typeof st);
        // console.log(st);
        
        
        // prototype을 이용한 공통 메서드 정의
        Student.prototype.getSum = function(){

            return this.kor+this.eng+this.math;
        }
        Student.prototype.getAvg=function(){
            return this.getSum()/3;
        }
        // Student.prototype.makeHtml=function(){
        //     html = '';
        //         html +='    <tr>';
        //         html +='        <td>'+this.name+'</td>';
        //         html +='        <td>'+this.getSum()+'</td>';
        //         html +='        <td>'+this.getAvg()+'</td>';
        //         html +='    </tr>';
        //         return html;
        // }
        Student.prototype.toString=function(){ //위에꺼 대신 toString사용
            html = '';
                html +='    <tr>';
                html +='        <td>'+this.name+'</td>';
                html +='        <td>'+this.getSum()+'</td>';
                html +='        <td>'+this.getAvg()+'</td>';
                html +='        <td>'+Math.round(this.getAvg())+'</td>'; // 반올림
                html +='    </tr>';
                return html;
        }


        window.onload=function(){
        
        //Students 타입의 객체들을 저장하는 배열생성
        var students = [];
        students.push(new Student('AAA',100,65,78));
        students.push(new Student('BBB',34,80,90));
        students.push(new Student('CCC',55,80,47));
        students.push(new Student('DDD',100,34,90));
        students.push(new Student('EEE',100,45,78));
        students.push(new Student('FFF',100,73,90));
        students.push(new Student('GGG',45,80,54));
        students.push(new Student('HHH',100,34,90));
        students.push(new Student('III',80,47,90));
        students.push(new Student('JJJ',17,80,56));

        students.sort(function(left,right){
            return right.getSum()-left.getSum();
        });

        students = students.slice(0,5); //상위 5명 

        var html='<table border="1">';
            html += '   <tr>';  
            html += '       <th>이름</th>';
            html += '       <th>총점</th>';
            html += '       <th>평균</th>';
            html += '   </tr>';

            for(var i = 0; i<students.length;i++) {
                // html += students[i].makeHtml();
                html += students[i]; //toString 오버라이딩

            }

            html += '</table>';
            
            // window.onload=function(){

                document.body.innerHTML= html;
            }

    </script>

</head>
<body>
    
</body>
</html>